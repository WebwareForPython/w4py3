
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>PickleCache &#8212; Webware for Python 3 3.0.10 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="next" title="PickleRPC" href="picklerpc.html" />
    <link rel="prev" title="ParamFactory" href="paramfactory.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-MiscUtils.PickleCache">
<span id="picklecache"></span><h1>PickleCache<a class="headerlink" href="#module-MiscUtils.PickleCache" title="Permalink to this heading">¶</a></h1>
<p>PickleCache.py</p>
<p>PickleCache provides tools for keeping fast-loading cached versions of
files so that subsequent loads are faster. This is similar to how Python
silently caches .pyc files next to .py files.</p>
<p>The typical scenario is that you have a type of text file that gets
“translated” to Pythonic data (dictionaries, tuples, instances, ints,
etc.). By caching the Python data on disk in pickle format, you can
avoid the expensive translation on subsequent reads of the file.</p>
<p>Two real life cases are MiscUtils.DataTable, which loads and represents
comma-separated files, and the separate MiddleKit plug-in which has an
object model file. So for examples on using this module, load up the
following files and search for “Pickle”:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">MiscUtils</span><span class="o">/</span><span class="n">DataTable</span><span class="o">.</span><span class="n">py</span>
<span class="n">MiddleKit</span><span class="o">/</span><span class="n">Core</span><span class="o">/</span><span class="n">Model</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>The cached file is named the same as the original file with
‘.pickle.cache’ suffixed. The utility of ‘.pickle’ is to denote the file
format and the utility of ‘.cache’ is to provide <code class="docutils literal notranslate"><span class="pre">*.cache</span></code> as a simple
pattern that can be removed, ignored by backup scripts, etc.</p>
<p>The treatment of the cached file is silent and friendly just like
Python’s approach to .pyc files. If it cannot be read or written for
various reasons (cache is out of date, permissions are bad, wrong python
version, etc.), then it will be silently ignored.</p>
<p>GRANULARITY</p>
<p>In constructing the test suite, I discovered that if the source file is
newly written less than 1 second after the cached file, then the fact
that the source file is newer will not be detected and the cache will
still be used. I believe this is a limitation of the granularity of
os.path.getmtime(). If anyone knows of a more granular solution, please
let me know.</p>
<p>This would only be a problem in programmatic situations where the source
file was rapidly being written and read. I think that’s fairly rare.</p>
<dl class="simple">
<dt>SEE ALSO</dt><dd><p><a class="reference external" href="https://docs.python.org/3/library/pickle.html">https://docs.python.org/3/library/pickle.html</a></p>
</dd>
</dl>
<dl class="py class">
<dt class="sig sig-object py" id="MiscUtils.PickleCache.PickleCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">MiscUtils.PickleCache.</span></span><span class="sig-name descname"><span class="pre">PickleCache</span></span><a class="headerlink" href="#MiscUtils.PickleCache.PickleCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Abstract base class for PickleCacheReader and PickleCacheWriter.</p>
<dl class="py method">
<dt class="sig sig-object py" id="MiscUtils.PickleCache.PickleCache.picklePath">
<span class="sig-name descname"><span class="pre">picklePath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MiscUtils.PickleCache.PickleCache.picklePath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="MiscUtils.PickleCache.PickleCacheReader">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">MiscUtils.PickleCache.</span></span><span class="sig-name descname"><span class="pre">PickleCacheReader</span></span><a class="headerlink" href="#MiscUtils.PickleCache.PickleCacheReader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#MiscUtils.PickleCache.PickleCache" title="MiscUtils.PickleCache.PickleCache"><code class="xref py py-class docutils literal notranslate"><span class="pre">PickleCache</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="MiscUtils.PickleCache.PickleCacheReader.picklePath">
<span class="sig-name descname"><span class="pre">picklePath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MiscUtils.PickleCache.PickleCacheReader.picklePath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MiscUtils.PickleCache.PickleCacheReader.read">
<span class="sig-name descname"><span class="pre">read</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pickleProtocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MiscUtils.PickleCache.PickleCacheReader.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from pickle cache.</p>
<p>Returns the data from the pickle cache version of the filename,
if it can read. Otherwise returns None, which also indicates
that writePickleCache() should be subsequently called after
the original file is read.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="MiscUtils.PickleCache.PickleCacheWriter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">MiscUtils.PickleCache.</span></span><span class="sig-name descname"><span class="pre">PickleCacheWriter</span></span><a class="headerlink" href="#MiscUtils.PickleCache.PickleCacheWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#MiscUtils.PickleCache.PickleCache" title="MiscUtils.PickleCache.PickleCache"><code class="xref py py-class docutils literal notranslate"><span class="pre">PickleCache</span></code></a></p>
<dl class="py method">
<dt class="sig sig-object py" id="MiscUtils.PickleCache.PickleCacheWriter.picklePath">
<span class="sig-name descname"><span class="pre">picklePath</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MiscUtils.PickleCache.PickleCacheWriter.picklePath" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="MiscUtils.PickleCache.PickleCacheWriter.write">
<span class="sig-name descname"><span class="pre">write</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pickleProtocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MiscUtils.PickleCache.PickleCacheWriter.write" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="MiscUtils.PickleCache.readPickleCache">
<span class="sig-prename descclassname"><span class="pre">MiscUtils.PickleCache.</span></span><span class="sig-name descname"><span class="pre">readPickleCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pickleProtocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MiscUtils.PickleCache.readPickleCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Read data from pickle cache.</p>
<p>Returns the data from the pickle cache version of the filename,
if it can read. Otherwise returns None, which also indicates
that writePickleCache() should be subsequently called after
the original file is read.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="MiscUtils.PickleCache.writePickleCache">
<span class="sig-prename descclassname"><span class="pre">MiscUtils.PickleCache.</span></span><span class="sig-name descname"><span class="pre">writePickleCache</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pickleProtocol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#MiscUtils.PickleCache.writePickleCache" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Webware for Python 3</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">List of Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migrate.html">Migration Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../copyright.html">Copyright and License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Beginner Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../appdev.html">Application Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">Plug-ins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../style.html">Style Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../psp.html">PSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userkit.html">UserKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../taskkit.html">TaskKit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../webutils.html">WebUtils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../miscutils.html">MiscUtils</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing.html">Testing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core/index.html">Core Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../psp/index.html">PSP</a></li>
<li class="toctree-l2"><a class="reference internal" href="../userkit/index.html">UserKit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../taskkit/index.html">TaskKit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../webutils/index.html">WebUtils</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">MiscUtils</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">API Reference</a><ul>
  <li><a href="index.html">MiscUtils</a><ul>
      <li>Previous: <a href="paramfactory.html" title="previous chapter">ParamFactory</a></li>
      <li>Next: <a href="picklerpc.html" title="next chapter">PickleRPC</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;1999-2023, Christoph Zwerschke et al.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../../_sources/ref/miscutils/picklecache.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>